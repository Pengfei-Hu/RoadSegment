<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv=”Access-Control-Allow-Origin" content="*">
  <title>index</title>
  <link rel="stylesheet" href="layui/css/layui.css">
</head>
<body>
<div class="oj-hybrid-padding">
  <h1>About Content Area</h1>

      <div>
          <form class="layui-form" action="">
              <div class="layui-form-item">
                  <div class="layui-inline">
                      <label class="layui-form-label">lat</label>
                      <div class="layui-input-inline">
                          <input type="text" name="lat" class="layui-input">
                      </div>
                  </div>
                  <div class="layui-inline">
                      <label class="layui-form-label">lon</label>
                      <div class="layui-input-inline">
                          <input type="text" name="lon"  class="layui-input">
                      </div>
                  </div>
                  <div class="layui-inline">
                      <label class="layui-form-label">startzoomLevel</label>
                      <div class="layui-input-inline">
                          <input type="text" name="tileZoom"  class="layui-input">
                      </div>
                  </div>
                  <div class="layui-inline">
                      <label class="layui-form-label">endzoomLevel</label>
                      <div class="layui-input-inline">
                          <input type="text" name="endzoomLevel"  class="layui-input">
                      </div>
                  </div>
                <br>
                  <div class="layui-btn-group">
                      <button type="submit" class="layui-btn" lay-submit="" lay-filter="ul" >UL</button>
                      <button type="submit" class="layui-btn" lay-submit="" lay-filter="ur" >UR</button>
                      <br>
                      <button type="submit" class="layui-btn" lay-submit=""  lay-filter="whole" >whole</button>
                      <br>
                      <button type="submit" class="layui-btn" lay-submit=""  lay-filter="ll" >LL</button>
                      <button type="submit" class="layui-btn" lay-submit="" lay-filter="lr" >LR</button>
                  </div>

          </form>




          <div class="layui-row" id="test1">

          </div>

      </div>
      <!--To change the content of this section, you will make edits to the about.html file located in the /js/views folder.-->
  </div>
</div>
</div>

<script src="layui/layui.js"></script>
<script>
    layui.use(function(){
        $ = layui.$
       ,layer = layui.layer
      ,form = layui.form
      ,laypage = layui.laypage
      ,element = layui.element
      ,laydate = layui.laydate
      ,util = layui.util;


        /**
         * get map button
         */


        var partlist = "";






        var data_multi = 0




        console.log("123")



        form.on('submit(ul)', function(data){
            console.log("url");
            partlist += "0"
            console.log("url");
            if (partlist != ""){
                send_info(data)
            }else {
                send_mu(data)
            }

            data_multi += 1
            return false;
            });

        form.on('submit(ur)', function(data){
            partlist += "1"
                if (partlist != ""){
                send_info(data)
            }else {
                send_mu(data)
            }
            data_multi += 1
            return false;
            });
        form.on('submit(whole)', function(data){
            partlist = ""
               if (partlist != ""){
                send_info(data)
            }else {
                send_mu(data)
            }
            data_multi += 1
            return false;
            });
        form.on('submit(ll)', function(data){
            partlist += "2"
                if (partlist != ""){
                send_info(data)
            }else {
                send_mu(data)
            }
            data_multi += 1
            return false;
            });
        form.on('submit(lr)', function(data){
            partlist += "3"
                if (partlist != ""){
                send_info(data)
            }else {
                send_mu(data)
            }
            data_multi += 1
            return false;
            });

            function send_info(data) {
                console.log("part");
             $.ajax({
                 url: 'http://127.0.0.1:5000/multi/part',
                 datatype: 'json',
                 type: 'get',
                 crossDomain: true,
                 data: "lon=" + data.field.lon.trim() + "&lat= " + data.field.lat.trim() + "&tileZoom= " + data.field.tileZoom.trim() + "&endzoomLevel=" + data_multi.toString() + "&partlist=" + partlist,
                 success: function (data) {
                     var str = '';
                     //Google
                     str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                     str += '<p>Bing</p>';
                     str += '<img src=../' + data.bing + '>';
                     str += '</div>';
                     //BIng

                     str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                     str += '<p>Google</p>';
                     str += '<img src=../' + data.google + '>';
                     str += '</div>';
                     //OSM
                     str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                     str += '<p>OSM</p>';
                     str += '<img src=../' + data.osm + '>';
                     str += '</div>';
                     $("#test1").html("");

                     $("#test1").append(str);
                 }
             })
            }

            function send_mu(data) {
                 $.ajax({
                 url: 'http://127.0.0.1:5000/multi/whole',
                 datatype: 'json',
                 type: 'get',
                 crossDomain: true,
                 data: "lon=" + data.field.lon + "&lat= " + data.field.lat + "&tileZoom= " + data.field.tileZoom + "&endzoomLevel=" + data_multi,
                 success: function (data) {
                     var str = '';
                     //Google
                     str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                     str += '<p>Bing</p>';
                     str += '<img src=../' + data.bing + '>';
                     str += '</div>';
                     //Bing

                     str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                     str += '<p>Google</p>';
                     str += '<img src=../' + data.google + '>';
                     str += '</div>';
                     //OSM
                     str += '<div class="layui-col-xs4 layui-col-sm4 layui-col-md4">';
                     str += '<p>OSM</p>';
                     str += '<img src=../' + data.osm + '>';
                     str += '</div>';

                     $("#test1").html("");
                     $("#test1").append(str);
                 }
             })
            }




        });
</script>
</body>
</html>